<html>
  <head>
    <%= stylesheet_link_tag 'posts_css' %>
  </head>

  <body>
    <main class="flex-column">
      <div class="post-detail-show">
        <div class="post-detail-header-show flex-row">
          <h2 class="post-title-show">
            Post #<%= @post.id %> by <%= @post.author.name %>
          </h2>
          <p class="post-counters">
            Comments: <%= @post.comments_counter %>, Likes: <%= @post.likes_counter %>
          </p>
        </div>
        <p><%= @post.text %></p>
      </div>
      <% if @post.comments.any? %>
        <ul class="post-comment-show">
          <% @post.comments.each do |comment| %>
            <li>
              Username: <%= comment.author.name %> || Comment: <%= comment.text %>
              <%= link_to "Delete Comment", user_post_comment_path(comment.author, comment.post, comment), data: { turbo_method: :delete }, class: 'btn' if can? :delete, comment %>
            </li>
          <% end %>
        </ul>
      <% end %>

      <div class="form flex-row">
        <div>
          <%= link_to "Add comment", new_user_post_comment_path(@post.author, @post), class: 'btn' %>
        </div>
        <%= link_to "Delete Post", user_post_path(@post.author), data: { turbo_method: :delete }, class: 'btn' if can? :delete, @post %>
        <div>
          <%= form_with(url: user_post_like_path(@post.author, @post), method: :post) do |form| %>
            <%= form.submit 'Like' %>
          <% end %>
        </div>
      </div>
    </main>
  </body>
</html>
